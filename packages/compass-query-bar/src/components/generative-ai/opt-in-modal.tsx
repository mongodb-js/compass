import React from 'react';
import { connect } from 'react-redux';
import type { RootState } from '../../stores/query-bar-store';
import { signIn } from '../../stores/atlas-signin-reducer';
import { hideOptIn } from '../../stores/ai-query-reducer';
import {
  Badge,
  Button,
  H3,
  Link,
  Modal,
  SpinLoader,
  Subtitle,
  css,
  cx,
  spacing,
} from '@mongodb-js/compass-components';

const bannerStyles = css({
  display: 'block',
  width: 400,
  height: 300,
});

const OptInImageBanner = () => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 400 300"
      className={bannerStyles}
    >
      <path fill="#00684A" d="M0 0h400v300H0z" />
      <g clipPath="url(#a)">
        <path
          fill="#E3FCF7"
          d="M106.292 272c4.101.068 8.173-.684 11.978-2.212 3.806-1.529 7.267-3.802 10.181-6.687 2.914-2.886 5.222-6.324 6.788-10.114 1.565-3.79 2.358-7.855 2.33-11.955v-.249c.01-8.221 3.284-16.1 9.102-21.907 5.818-5.807 13.704-9.067 21.925-9.062h.249c8.221.007 16.108-3.251 21.927-9.059 5.818-5.807 9.092-13.688 9.1-21.909.012-8.219 3.287-16.098 9.105-21.904 5.817-5.807 13.703-9.067 21.923-9.064h31.046c12.245-.026 24.207-3.681 34.375-10.503s18.086-16.504 22.754-27.824c4.667-11.3192 5.874-23.7683 3.469-35.7738-2.405-12.0056-8.314-23.029-16.982-31.6775-8.668-8.6485-19.704-14.534-31.716-16.913-12.011-2.3789-24.458-1.1446-35.768 3.5471-11.31 4.6918-20.976 12.6303-27.776 22.8127-6.8 10.1824-10.43 22.1518-10.43 34.3959v31.4666c.006 8.182-3.229 16.032-8.997 21.836-5.767 5.803-13.598 9.086-21.78 9.132h-62.304c-4.057-.001-8.0742.8-11.8206 2.356-3.7465 1.557-7.1484 3.838-10.0103 6.714-2.8619 2.875-5.1273 6.288-6.666 10.041-1.5387 3.754-2.3204 7.775-2.3002 11.831v61.687c-.4794 17.117 13.4234 30.745 30.2981 30.994Z"
        />
        <path
          fill="#F9EBFF"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M149.988 46.9272h85.961c.672 0 1.337.1323 1.957.3893.62.257 1.184.6336 1.659 1.1084.475.4749.851 1.0385 1.108 1.6589.257.6204.39 1.2853.39 1.9568v70.0534h-96.188V52.0406c0-1.3561.538-2.6567 1.497-3.6157.959-.9589 2.26-1.4977 3.616-1.4977v0Z"
        />
        <path
          fill="#F9EBFF"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M149.988 46.9272h85.961c.672 0 1.337.1323 1.957.3893.62.257 1.184.6336 1.659 1.1084.475.4749.851 1.0385 1.108 1.6589.257.6204.39 1.2853.39 1.9568v5.0368h-96.188v-5.0368c0-1.3561.538-2.6567 1.497-3.6157.959-.9589 2.26-1.4977 3.616-1.4977v0Z"
        />
        <path
          fill="#B45AF2"
          d="M185.292 79.5891h-31.641v8.1239h31.641v-8.1239Zm47.001-13.2885h-78.642v8.1239h78.642v-8.1239Zm-47.001 26.5706h-31.641v21.1058h31.641V92.8712Zm46.994-13.2821H190.45v34.3939h41.836V79.5891Z"
        />
        <path
          fill="#000"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m167.4 212.128 124.384-8.948.524-.038h.051c0-.697.045-1.387.045-2.084v-.185l18.122-67.446-123.01 7.759c-1 .162-1.928.625-2.659 1.327-.731.703-1.23 1.611-1.432 2.604L167.4 212.128Z"
        />
        <path
          fill="#fff"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m188.028 139.358-19.816 72.719 130.041-1.227 20.454-79.296c.163-.635.173-1.3.028-1.939s-.439-1.235-.859-1.738c-.42-.504-.954-.9-1.558-1.156-.603-.256-1.259-.366-1.913-.319l-121.308 8.814c-1.169.085-2.283.528-3.19 1.269-.908.742-1.564 1.745-1.879 2.873v0Z"
        />
        <path
          fill="#fff"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m187.184 142.382-19.004 69.695 122.178-1.227 20.168-77.423-123.342 8.955Z"
        />
        <path
          fill="#000"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m294.456 213.043-173.091 18.67-.243-2.295 69.552-18.875.006-.006 106.729-7.747-2.953 10.253Z"
        />
        <path
          fill="#00ED64"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m302.503 138.412-16.6 60.741-109.138 8.399 15.731-61.15 110.007-7.99Z"
        />
        <path
          fill="#fff"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m81.3693 78.3363 5.3183-5.4777 8.2841 2.3649-5.0817 5.5481-8.5207-2.4353Zm-.0063.0128 1.6235 7.4591 8.2842 2.3714-1.3807-7.3953-8.527-2.4352Z"
        />
        <path
          fill="#000"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m96.2693 82.5868-1.2976-7.3633-5.0817 5.5608 1.3807 7.3953 4.9986-5.5928Z"
        />
        <path
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m194.509 153.516 25.102-1.822m1.822-.134 3.381-.249m-1.157 7.517 3.382-.243m7.568 6.884 3.381-.25m-4.762 4.66 3.381-.243m-7.306-11.217 22.641-1.643m-12.055 8.309 18.875-1.374m-20.179 5.778 18.875-1.368m-25.606 6.169 3.381-.244m1.969-.14 18.876-1.374m-26.099 6.206 3.381-.243"
        />
        <path
          fill="#000"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M236.102 206.293c-.754.057-2.403-.064-6.046-3.912l-.288-.313c-.102-.102-.205-.211-.301-.326-.095-.115-.364-.403-.556-.639-.191-.237-.402-.461-.639-.71-.115-.128-.224-.262-.339-.396l-.326-.403c1.445-.741 3.094-1.508 4.897-2.243.268.332.53.639.786.997.486.639.959 1.278 1.393 1.866.435.588.851 1.227 1.202 1.803 1.451 2.352 1.95 4.148.217 4.276Zm11.148.141h-.115l-4.647.338c-1.719-.888-3.285-2.556-5.229-4.813l-.926-1.08c-.218-.243-.435-.498-.64-.761-.677-.786-1.406-1.623-2.198-2.499l-.096-.096c-.103-.108-.23-.223-.371-.345 1.278-.517 2.685-1.01 4.116-1.444l.186-.058c1.543-.485 3.177-.607 4.775-.358-.013.257.002.514.044.767 0 .141.058.281.096.428.247.889.683 1.713 1.279 2.417.748.933 1.329 1.706 1.77 2.352.021.058.038.118.051.179h.064c1.279 1.917 1.33 2.608 1.119 2.94l-.109-.051c.027.034.051.07.071.108.404.59.665 1.267.76 1.976Zm-21.522 1.559-3.247.237c-.331-.275-.637-.579-.914-.908-.666-.786-1.381-1.529-2.141-2.224-.211-.192-.416-.371-.64-.531l.505-.224c.996-.456 1.956-.988 2.87-1.591.384-.249.889-.569 1.496-.933.294.268.582.562.869.882.288.319.525.639.787.971.454.615.733 1.342.806 2.103.073.761-.062 1.528-.391 2.218v0Z"
        />
        <path
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m235.329 178.348 18.876-1.368"
        />
        <path
          fill="#F2C5EE"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M248.497 204.733c-.686.085-1.381-.016-2.014-.294.211-.332.16-1.048-1.118-2.94-.034-.06-.073-.118-.115-.173-.441-.639-1.023-1.419-1.771-2.352-.595-.704-1.032-1.528-1.278-2.416-.039-.147-.071-.287-.096-.428-.043-.253-.058-.511-.045-.767 0 0 0 0 0 0 .591.088 1.174.221 1.745.396.748.754 1.489 1.528 2.186 2.288.97 1.031 1.861 2.134 2.666 3.299 1.201 1.776 1.495 3.138-.16 3.387Z"
        />
        <path
          fill="#000"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m133.42 207.463-.46.268-6.558.856-12.599-11-2.41-2.154-.16-.14 6.622-1.809 15.565 13.979Zm54.096-25.152c-.978.434-2.036.663-3.106.671-2.239-.046-4.457-.434-6.578-1.15-.543-.16-1.112-.339-1.713-.531-1.227-.39-2.557-.85-4.014-1.361-.106-.042-.215-.074-.326-.096.249-.371.511-.748.786-1.125s.601-.799.921-1.189c.426-.511.852-1.004 1.278-1.477.519-.571 1.067-1.116 1.643-1.629.108.672.436 1.29.933 1.757.503.505 1.076.936 1.7 1.279v.095l.493.147c.35.181.711.341 1.08.48h-.128c.332.032.639.064.978.083 1.425.409 2.774.78 3.912 1.138 3.03.958 4.583 1.834 2.141 2.908Z"
        />
        <path
          fill="#F2C5EE"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M189.364 177.402c-.863.639-2.091.921-3.772.984-1.391.03-2.782-.019-4.167-.147-.64-.179-1.279-.364-1.918-.568l-.467-.243c-.624-.343-1.197-.774-1.7-1.279-.497-.467-.825-1.085-.933-1.757.147-.135.287-.262.434-.384.148-.121.352-.294.525-.428l.549.115c.684.134 1.368.256 2.046.371 2.41.402 4.704.671 6.501.958 3.081.518 4.698 1.055 2.902 2.378Z"
        />
        <path
          fill="#F2C5EE"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M190.111 167.687c-.639.3-1.278.562-1.968.805-2.436.901-4.89 1.566-7.473 2.947-.91.483-1.784 1.032-2.614 1.642-.23.166-.467.345-.703.531-.237.185-.345.281-.524.428-.179.147-.288.249-.435.383-.576.514-1.124 1.059-1.643 1.63-.426.473-.852.966-1.278 1.477-.32.39-.639.792-.921 1.189-.281.396-.537.754-.786 1.125l-.185.268c-.783 1.159-1.449 2.392-1.988 3.682-.639 1.655-.582 2.748.639 2.556.831-.313 1.592-.6 2.295-.856 1.086-.396 2.02-.729 2.851-.997.639-.211 1.917-.55 1.917-.55 1.892-.554 3.912-.473 5.753.23.353.117.682.297.972.531.22.135.403.322.534.545.13.223.204.475.214.733-.109.697-.64 1.068-1.413 1.31-1.362.429-3.484.486-5.472 1.279-.752.258-1.479.583-2.173.971-.441.243-1.003.576-1.803 1.055l-.735.447c-6.769 4.123-11.307 4.072-13.314 3.727-5.012 1.016-8.457 3.196-12.337 5.113l-13.698 7.734-.876.115.46-.268-15.545-13.985 26.668-7.261-.045-.032c3.133-.889 6.153-2.138 9-3.72 3.617-2.039 7.097-4.31 10.419-6.801 3.196-2.359 5.037-3.835 5.957-4.474 3.038-1.996 6.318-3.596 9.761-4.762h.096c.914-.313 1.777-.582 2.557-.806.927-.268 1.719-.479 2.333-.639 1.55-.423 3.123-.756 4.711-.997v0c6.596-.952 3.234 2.582.792 3.695Z"
        />
        <path
          fill="#F2C5EE"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m254.614 196.06-10.112-5.491c-1.816-.895-2.308-1.342-5.811-1.617l-1.758-.115-2.416-1.131c-.527-.159-1.073-.25-1.623-.269-.85-.077-1.713-.108-2.557-.108-2.513-.004-5.017.292-7.46.882-8.226 1.962-24.085 5.752-24.481 5.854l-64.56 8.393-7.441.965-12.599-10.994.16.147-20.0646 22.537 7.6706 5.587.077.057 7.919 5.823 2.461 1.809c.982.721 2.105 1.228 3.295 1.488s2.422.267 3.615.021l1.771-.365.447-.115 69.553-18.881 10.425-2.832c.994-.26 2.024-.359 3.049-.294 5.038.172 10.049-.8 14.657-2.844l.505-.224c.996-.456 1.956-.988 2.87-1.591.384-.249.889-.569 1.496-.933 1.035-.64 2.378-1.4 3.957-2.206 1.444-.741 3.093-1.508 4.896-2.243l.473-.185c1.278-.518 2.685-1.01 4.116-1.445l.186-.057c1.543-.485 3.177-.608 4.775-.358v0c.59.088 1.174.22 1.745.396.396.115.805.262 1.227.422 3.413 1.316 5.964 2.077 7.715 2.173.634.066 1.275-.024 1.867-.262.19-.091.35-.234.461-.414.11-.179.167-.387.162-.598-.005-.21-.07-.415-.189-.59-.118-.174-.285-.31-.479-.392Z"
        />
        <path
          fill="#7C25FF"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m113.963 192.576-20.0716 22.537-1.6299 1.835-.5753-.448-.8246-.639c-.3452-1.195-.6392-2.403-.9077-3.63-.115-.531-.2237-1.061-.3132-1.598-.5787-3.18-.8632-6.407-.8501-9.639 0-1.508.0681-3 .2045-4.474v-.32c.6676-7.038 2.7551-13.868 6.1364-20.076.0511-.103.1087-.211.1726-.314l18.6589 16.766Z"
        />
        <path
          fill="#000"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m101.613 220.757-12.9439 7.511h-.0447c-3.6371-6.039-6.0157-12.751-6.993-19.732l.0576.045c-.1279-.908-.2302-1.809-.3197-2.729-.1342-1.566-.2109-3.158-.2109-4.762v-.153c0-.774 0-1.547.0639-2.321h-.0511c.444-9.618 3.5292-18.929 8.9169-26.909h.032l.2493-.371 4.9283 4.423c-.0639.103-.1215.211-.1726.314-3.3569 6.197-5.4268 13.008-6.0853 20.025v.32c-.1321 1.478-.2002 2.97-.2045 4.474-.0261 3.268.252 6.531.831 9.747.0895.537.1981 1.068.3132 1.598.2557 1.227.5625 2.435.9077 3.631l.8245.639.5753.447 1.6044-1.841 7.6706 5.587.051.057Z"
        />
        <path
          stroke="#000"
          strokeDasharray="2 2"
          strokeMiterlimit="10"
          d="M244.869 230.622h7.511m4.219 0h42.954"
        />
        <path
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m162.715 224.72-2.518 2.806"
        />
        <path
          fill="#000"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m272.966 75.3449 10.074 4.1994v-2.774l-6.226-2.4928 6.226-2.5119v-2.7677l-10.074 4.2122v2.1348Zm25.031-5.1325V72.98l6.219 2.512-6.219 2.4928v2.774l10.074-4.1994v-2.1348l-10.074-4.2122Zm-4.999-4.7299-7.318 11.2814-.416.6392h3.202l1.285-1.9878 2.084-3.2215 4.334-6.7113h-3.171Z"
        />
        <path
          fill="#fff"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m271.968 73.0759 10.081 4.1994v-2.774l-6.226-2.4928 6.226-2.512v-2.7676l-10.081 4.2121v2.1349ZM297 67.9433v2.7676l6.226 2.512L297 75.7157v2.774l10.08-4.1994v-2.1348L297 67.9433Zm-4.992-4.7299-7.319 11.2814-.416.6392h3.203l1.284-1.9878 2.084-3.2279 4.334-6.7049h-3.17Z"
        />
        <path
          fill="#7C25FF"
          stroke="#7C25FF"
          strokeMiterlimit="10"
          d="M150.743 53.7408c.96 0 1.738-.7783 1.738-1.7385 0-.9602-.778-1.7386-1.738-1.7386-.961 0-1.739.7784-1.739 1.7386 0 .9602.778 1.7385 1.739 1.7385Zm5.554 0c.961 0 1.739-.7783 1.739-1.7385 0-.9602-.778-1.7386-1.739-1.7386-.96 0-1.738.7784-1.738 1.7386 0 .9602.778 1.7385 1.738 1.7385Zm5.555 0c.96 0 1.739-.7783 1.739-1.7385 0-.9602-.779-1.7386-1.739-1.7386-.96 0-1.739.7784-1.739 1.7386 0 .9602.779 1.7385 1.739 1.7385Z"
        />
        <path
          stroke="#000"
          strokeDasharray="2 2"
          strokeMiterlimit="10"
          d="m265.059 106.07 21.017-11.4412m-36.857 13.2372 21.024-11.4411"
        />
        <path
          fill="#fff"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m300.356 202.579-2.135 8.271-130.373 9.351 51.916-11.773 80.592-5.849Z"
        />
        <path
          fill="#000"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M192.483 135.274c-.99.183-1.914.624-2.678 1.278l57.65 5.056.908-10.38-55.778 4.046h-.102Z"
        />
        <path
          fill="#fff"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M316.921 237.072c3.562 0 6.449-2.888 6.449-6.45 0-3.562-2.887-6.449-6.449-6.449s-6.45 2.887-6.45 6.449 2.888 6.45 6.45 6.45Z"
        />
        <path
          fill="#000"
          stroke="#000"
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M313.066 235.793s8.099-2.806 9.192-8.795c1.413 1.847 1.988 6.117-1.023 8.425-3.01 2.307-5.976 1.553-8.169.37Z"
        />
        <path
          fill="#000"
          stroke="#000"
          strokeMiterlimit="10"
          d="M112.69 166.824c11.426 0 20.689-9.263 20.689-20.689 0-11.427-9.263-20.69-20.689-20.69-11.427 0-20.69 9.263-20.69 20.69 0 11.426 9.263 20.689 20.69 20.689Z"
        />
        <path
          fill="#fff"
          stroke="#000"
          strokeMiterlimit="10"
          d="m140.375 138.59-2.334-4.134-1.61.909 2.334 4.134 1.61-.909Z"
        />
        <path
          fill="#fff"
          stroke="#000"
          strokeMiterlimit="10"
          d="m137.98 138.105-.757-1.34-3.655 2.063.757 1.34 3.655-2.063Z"
        />
        <path
          fill="#000"
          stroke="#000"
          strokeMiterlimit="10"
          d="m136.067 137.417 1.196 1.09.722-.408-.755-1.339-1.163.657Z"
        />
        <path
          fill="#00ED64"
          stroke="#000"
          strokeMiterlimit="10"
          d="M115.446 167.59c11.426 0 20.689-9.263 20.689-20.69 0-11.426-9.263-20.689-20.689-20.689-11.427 0-20.6898 9.263-20.6898 20.689 0 11.427 9.2628 20.69 20.6898 20.69Z"
        />
        <path
          fill="#fff"
          stroke="#000"
          strokeMiterlimit="10"
          d="M115.446 164.184c9.546 0 17.284-7.738 17.284-17.284 0-9.545-7.738-17.284-17.284-17.284-9.545 0-17.2834 7.739-17.2834 17.284 0 9.546 7.7384 17.284 17.2834 17.284Z"
        />
        <path
          stroke="#000"
          strokeMiterlimit="10"
          d="M122.348 127.152c2.804 0 5.076-2.273 5.076-5.076 0-2.803-2.272-5.076-5.076-5.076-2.803 0-5.075 2.273-5.075 5.076 0 2.803 2.272 5.076 5.075 5.076Z"
        />
        <path
          stroke="#000"
          strokeMiterlimit="10"
          d="m124.726 121.828-4.283-1.192-.855 3.074 4.282 1.192.856-3.074Zm-6.29 1.557 6.593 1.834m-2.164-.595-2.269-.632-.742 2.667 2.269.631.742-2.666Z"
        />
        <path
          fill="#000"
          stroke="#000"
          strokeMiterlimit="10"
          d="m122.713 125.164-2.388-.204.274-.973 2.268.63-.154.547Z"
        />
        <path
          stroke="#000"
          strokeMiterlimit="10"
          d="m108.719 134.991 9.021 15.975m-6.717-1.571 12.449-7.027"
        />
        <path
          fill="#000"
          stroke="#000"
          strokeMiterlimit="10"
          d="M115.446 147.991c.602 0 1.09-.489 1.09-1.091s-.488-1.09-1.09-1.09c-.602 0-1.09.488-1.09 1.09 0 .602.488 1.091 1.09 1.091Z"
        />
        <path
          stroke="#000"
          strokeMiterlimit="10"
          d="m119.555 132.121-.707 2.549m-6.808 24.46-.707 2.549m.285-29.634.66 2.56m6.334 24.588.66 2.56m-14.568-25.803 1.849 1.889m17.783 18.123 1.849 1.888m4.112-14.778-2.559.66m-24.588 6.338-2.56.66m25.803-14.572-1.885 1.852m-18.127 17.78-1.885 1.852m25.726-6.632-2.546-.708m-24.464-6.804-2.545-.711m29.555 8.223-2.546-.708m-24.464-6.804-2.545-.711"
        />
      </g>
      <rect width="355" height="31" x="22.5" y="246.5" fill="#fff" rx="5.5" />
      <path
        fill="#001E2B"
        d="M35.222 267v-9.23h1.209v3.939h5.057v-3.939h1.209V267h-1.209v-4.16h-5.057V267h-1.209Zm15.9108-3.25c0 1.872-1.443 3.38-3.393 3.38-1.963 0-3.406-1.508-3.406-3.38 0-1.872 1.443-3.38 3.406-3.38 1.95 0 3.393 1.508 3.393 3.38Zm-5.655 0c0 1.3.91 2.34 2.262 2.34 1.352 0 2.249-1.04 2.249-2.34 0-1.3-.897-2.34-2.249-2.34s-2.262 1.04-2.262 2.34ZM58.2242 267l-1.599-4.68-1.612 4.68h-.988l-2.21-6.5h1.17l1.573 4.745 1.625-4.745h.858l1.625 4.745 1.573-4.745h1.183l-2.21 6.5h-.988Zm7.3102 0v-6.5h1.118v1.001c.377-.689 1.092-1.131 1.963-1.131.975 0 1.677.533 2.002 1.391.351-.858 1.17-1.391 2.132-1.391 1.417 0 2.275 1.053 2.275 2.639V267h-1.118v-3.822c0-1.053-.442-1.781-1.287-1.781-1.053 0-1.781.91-1.781 2.379V267h-1.118v-3.822c0-1.053-.429-1.781-1.274-1.781-1.053 0-1.794.91-1.794 2.379V267h-1.118Zm10.995-3.25c0-1.859 1.365-3.38 3.185-3.38.975 0 1.859.507 2.288 1.131V260.5h1.118v6.5h-1.118v-1.001c-.429.624-1.313 1.131-2.288 1.131-1.82 0-3.185-1.521-3.185-3.38Zm5.564 0c0-1.313-.897-2.353-2.21-2.353s-2.223 1.04-2.223 2.353c0 1.313.91 2.353 2.223 2.353 1.313 0 2.21-1.04 2.21-2.353Zm3.1315 3.25v-6.5h1.118v1.001c.442-.767 1.222-1.131 2.067-1.131 1.456 0 2.457 1.014 2.457 2.626V267h-1.105v-3.835c0-1.092-.624-1.768-1.534-1.768-1.053 0-1.885.858-1.885 2.379V267h-1.118Zm9.2573 2.717h-1.248l1.417-3.055-2.847-6.162h1.235l2.236 4.927 2.223-4.927h1.248l-4.264 9.217Zm8.1328-5.226V260.5h1.118v3.822c0 1.092.572 1.781 1.469 1.781 1.014 0 1.807-.884 1.807-2.379V260.5h1.118v6.5h-1.118v-1.001c-.429.754-1.183 1.131-2.002 1.131-1.43 0-2.392-1.027-2.392-2.639Zm12.105.754c0 1.287-1.04 1.885-2.392 1.885-1.391 0-2.548-.702-2.639-2.015h1.144c.156.793.832 1.066 1.508 1.066.702 0 1.248-.286 1.248-.858 0-.52-.312-.832-1.079-1.04l-.936-.247c-1.118-.286-1.677-.988-1.677-1.911 0-1.079.936-1.755 2.249-1.755 1.391 0 2.249.819 2.366 1.859h-1.118c-.169-.572-.637-.923-1.248-.923-.624 0-1.118.312-1.118.806 0 .481.299.754.988.936l1.04.273c1.079.273 1.664.949 1.664 1.924Zm7.394-.221c-.325 1.144-1.391 2.106-3.042 2.106-1.898 0-3.276-1.443-3.276-3.38 0-1.898 1.274-3.38 3.302-3.38 2.041 0 3.276 1.664 3.12 3.679h-5.291c.039 1.183.988 2.067 2.158 2.067.806 0 1.495-.312 1.885-1.092h1.144Zm-3.055-3.666c-.936 0-1.859.52-2.08 1.807h4.056c-.208-1.209-1.014-1.807-1.976-1.807Zm4.772 5.642v-6.5h1.118v1.261c.26-.832 1.066-1.326 1.82-1.326.169 0 .325.013.507.052v1.157c-.208-.078-.39-.104-.611-.104-.819 0-1.716.715-1.716 2.236V267h-1.118Zm9.132-1.755c0 1.287-1.04 1.885-2.392 1.885-1.391 0-2.548-.702-2.639-2.015h1.144c.156.793.832 1.066 1.508 1.066.702 0 1.248-.286 1.248-.858 0-.52-.312-.832-1.079-1.04l-.936-.247c-1.118-.286-1.677-.988-1.677-1.911 0-1.079.936-1.755 2.249-1.755 1.391 0 2.249.819 2.366 1.859h-1.118c-.169-.572-.637-.923-1.248-.923-.624 0-1.118.312-1.118.806 0 .481.299.754.988.936l1.04.273c1.079.273 1.664.949 1.664 1.924Zm9.204 0c0 1.287-1.04 1.885-2.392 1.885-1.391 0-2.548-.702-2.639-2.015h1.144c.156.793.832 1.066 1.508 1.066.702 0 1.248-.286 1.248-.858 0-.52-.312-.832-1.079-1.04l-.936-.247c-1.118-.286-1.677-.988-1.677-1.911 0-1.079.936-1.755 2.249-1.755 1.391 0 2.249.819 2.366 1.859h-1.118c-.169-.572-.637-.923-1.248-.923-.624 0-1.118.312-1.118.806 0 .481.299.754.988.936l1.04.273c1.079.273 1.664.949 1.664 1.924Zm2.935-7.28c0 .442-.338.793-.78.793s-.806-.351-.806-.793c0-.429.364-.793.806-.793.442 0 .78.364.78.793ZM143.75 267v-6.5h1.118v6.5h-1.118Zm2.952.598h1.092c.299.858 1.027 1.261 2.08 1.261 1.17 0 2.054-.78 2.054-2.249v-.767c-.442.65-1.3 1.144-2.262 1.144-1.807 0-3.185-1.456-3.185-3.315 0-1.846 1.378-3.302 3.185-3.302.962 0 1.82.481 2.262 1.131V260.5h1.118v6.097c0 2.171-1.43 3.25-3.198 3.25-1.742 0-2.951-.936-3.146-2.249Zm5.317-3.926c0-1.3-.897-2.275-2.197-2.275s-2.197.975-2.197 2.275c0 1.313.897 2.275 2.197 2.275s2.197-.962 2.197-2.275Zm3.132 3.328v-6.5h1.118v1.001c.442-.767 1.222-1.131 2.067-1.131 1.456 0 2.457 1.014 2.457 2.626V267h-1.105v-3.835c0-1.092-.624-1.768-1.534-1.768-1.053 0-1.885.858-1.885 2.379V267h-1.118Zm13.466-1.976c-.325 1.144-1.391 2.106-3.042 2.106-1.898 0-3.276-1.443-3.276-3.38 0-1.898 1.274-3.38 3.302-3.38 2.041 0 3.276 1.664 3.12 3.679h-5.291c.039 1.183.988 2.067 2.158 2.067.806 0 1.495-.312 1.885-1.092h1.144Zm-3.055-3.666c-.936 0-1.859.52-2.08 1.807h4.056c-.208-1.209-1.014-1.807-1.976-1.807Zm4.265 2.392c0-1.859 1.365-3.38 3.185-3.38.975 0 1.859.507 2.288 1.131v-4.251h1.118V267H175.3v-1.001c-.429.624-1.313 1.131-2.288 1.131-1.82 0-3.185-1.521-3.185-3.38Zm5.564 0c0-1.313-.897-2.353-2.21-2.353s-2.223 1.04-2.223 2.353c0 1.313.91 2.353 2.223 2.353 1.313 0 2.21-1.04 2.21-2.353Zm6.176.741V260.5h1.118v3.822c0 1.092.572 1.781 1.469 1.781 1.014 0 1.807-.884 1.807-2.379V260.5h1.118v6.5h-1.118v-1.001c-.429.754-1.183 1.131-2.002 1.131-1.43 0-2.392-1.027-2.392-2.639Zm7.62 5.226V260.5h1.118v1.001c.429-.624 1.313-1.131 2.288-1.131 1.807 0 3.185 1.521 3.185 3.38s-1.378 3.38-3.185 3.38c-.975 0-1.859-.507-2.288-1.131v3.718h-1.118Zm5.447-5.967c0-1.313-.897-2.353-2.21-2.353s-2.21 1.04-2.21 2.353c0 1.313.897 2.353 2.21 2.353s2.21-1.04 2.21-2.353Zm5.89 3.25v-9.75h1.118V267h-1.118Zm2.73-3.25c0-1.859 1.365-3.38 3.185-3.38.975 0 1.859.507 2.288 1.131V260.5h1.118v6.5h-1.118v-1.001c-.429.624-1.313 1.131-2.288 1.131-1.82 0-3.185-1.521-3.185-3.38Zm5.564 0c0-1.313-.897-2.353-2.21-2.353s-2.223 1.04-2.223 2.353c0 1.313.91 2.353 2.223 2.353 1.313 0 2.21-1.04 2.21-2.353Zm7.616 1.495c0 1.287-1.04 1.885-2.392 1.885-1.391 0-2.548-.702-2.639-2.015h1.144c.156.793.832 1.066 1.508 1.066.702 0 1.248-.286 1.248-.858 0-.52-.312-.832-1.079-1.04l-.936-.247c-1.118-.286-1.677-.988-1.677-1.911 0-1.079.936-1.755 2.249-1.755 1.391 0 2.249.819 2.366 1.859h-1.118c-.169-.572-.637-.923-1.248-.923-.624 0-1.118.312-1.118.806 0 .481.299.754.988.936l1.04.273c1.079.273 1.664.949 1.664 1.924Zm5.005 1.664c-.273.091-.598.156-1.001.156-1.131 0-1.989-.637-1.989-1.989v-3.549h-1.378V260.5h1.378v-1.807h1.118v1.807h1.872v1.027h-1.872v3.406c0 .832.377 1.105 1.079 1.105.273 0 .585-.052.793-.13v1.001Zm6.017-.78c0 .533-.429.975-.962.975-.533 0-.962-.442-.962-.975 0-.52.429-.975.962-.975.533 0 .962.455.962.975Zm3.133 0c0 .533-.429.975-.962.975-.533 0-.962-.442-.962-.975 0-.52.429-.975.962-.975.533 0 .962.455.962.975Zm-6.253 0c0 .533-.429.975-.962.975-.533 0-.962-.442-.962-.975 0-.52.429-.975.962-.975.533 0 .962.455.962.975Z"
      />
      <rect width="88" height="20" x="250" y="252" fill="#E8EDEB" rx="4" />
      <path
        fill="#3D4F58"
        d="M260.116 266.144c-.504 0-.976-.084-1.416-.252-.432-.176-.812-.432-1.14-.768-.32-.336-.572-.752-.756-1.248-.184-.504-.276-1.084-.276-1.74 0-.656.092-1.236.276-1.74.192-.512.448-.94.768-1.284.328-.352.712-.62 1.152-.804.44-.184.912-.276 1.416-.276.528 0 .976.104 1.344.312.376.2.692.428.948.684l-.972 1.092c-.168-.168-.352-.304-.552-.408-.2-.104-.456-.156-.768-.156-.256 0-.492.06-.708.18-.216.112-.404.276-.564.492-.16.216-.288.48-.384.792-.088.312-.132.664-.132 1.056 0 .808.152 1.436.456 1.884.312.44.78.66 1.404.66.152 0 .296-.02.432-.06.136-.04.248-.1.336-.18v-1.344h-1.14v-1.44h2.724v3.6c-.264.248-.612.468-1.044.66-.432.192-.9.288-1.404.288Zm7.039 0c-.464 0-.9-.068-1.308-.204-.4-.144-.748-.348-1.044-.612-.296-.264-.528-.588-.696-.972-.168-.392-.252-.836-.252-1.332 0-.488.084-.924.252-1.308.176-.392.408-.72.696-.984.288-.272.616-.476.984-.612.376-.144.764-.216 1.164-.216.456 0 .86.072 1.212.216.352.144.644.344.876.6.24.256.42.56.54.912.12.344.18.72.18 1.128 0 .16-.012.316-.036.468-.016.144-.032.252-.048.324h-4.056c.088.432.284.748.588.948.304.2.7.3 1.188.3.272 0 .528-.036.768-.108.248-.072.504-.176.768-.312l.588 1.068c-.344.216-.724.388-1.14.516-.416.12-.824.18-1.224.18Zm-.144-4.896c-.352 0-.648.092-.888.276-.232.184-.392.464-.48.84h2.544c-.088-.744-.48-1.116-1.176-1.116Zm4.244 4.752v-5.952h1.44l.132.792h.048c.256-.256.548-.476.876-.66.336-.184.728-.276 1.176-.276.672 0 1.164.216 1.476.648.312.432.468 1.024.468 1.776V266h-1.764v-3.444c0-.4-.064-.692-.192-.876-.128-.184-.356-.276-.684-.276-.24 0-.452.052-.636.156-.176.104-.368.26-.576.468V266h-1.764Zm10.291.144c-.464 0-.9-.068-1.308-.204-.4-.144-.748-.348-1.044-.612-.296-.264-.528-.588-.696-.972-.168-.392-.252-.836-.252-1.332 0-.488.084-.924.252-1.308.176-.392.408-.72.696-.984.288-.272.616-.476.984-.612.376-.144.764-.216 1.164-.216.456 0 .86.072 1.212.216.352.144.644.344.876.6.24.256.42.56.54.912.12.344.18.72.18 1.128 0 .16-.012.316-.036.468-.016.144-.032.252-.048.324h-4.056c.088.432.284.748.588.948.304.2.7.3 1.188.3.272 0 .528-.036.768-.108.248-.072.504-.176.768-.312l.588 1.068c-.344.216-.724.388-1.14.516-.416.12-.824.18-1.224.18Zm-.144-4.896c-.352 0-.648.092-.888.276-.232.184-.392.464-.48.84h2.544c-.088-.744-.48-1.116-1.176-1.116Zm4.771 4.752v-5.952h1.44l.144 1.296h.036c.296-.488.652-.848 1.068-1.08.416-.24.864-.36 1.344-.36.264 0 .476.02.636.06.168.04.34.1.516.18l-.36 1.476c-.184-.056-.352-.096-.504-.12-.144-.032-.328-.048-.552-.048-.368 0-.732.108-1.092.324-.352.216-.656.592-.912 1.128V266h-1.764Zm8.492.144c-.304 0-.576-.048-.816-.144-.24-.088-.444-.212-.612-.372-.168-.168-.3-.36-.396-.576-.088-.216-.132-.452-.132-.708 0-.336.072-.628.216-.876.144-.256.372-.472.684-.648.32-.176.728-.316 1.224-.42.496-.112 1.096-.188 1.8-.228-.032-.272-.152-.484-.36-.636-.2-.152-.504-.228-.912-.228-.288 0-.58.052-.876.156-.288.096-.6.228-.936.396l-.624-1.152c.408-.232.844-.424 1.308-.576.472-.152.964-.228 1.476-.228.832 0 1.488.22 1.968.66.48.44.72 1.116.72 2.028V266h-1.44l-.132-.672h-.048c-.304.232-.636.428-.996.588-.36.152-.732.228-1.116.228Zm.564-1.368c.264 0 .512-.052.744-.156.232-.112.452-.248.66-.408v-.984c-.44.024-.804.064-1.092.12-.288.056-.516.128-.684.216-.168.08-.288.176-.36.288-.064.112-.096.232-.096.36 0 .192.072.336.216.432.152.088.356.132.612.132Zm8.599 1.368c-.472 0-.872-.064-1.2-.192-.328-.128-.596-.304-.804-.528-.2-.232-.344-.508-.432-.828-.088-.32-.132-.676-.132-1.068v-2.1h-1.5v-1.308l1.584-.072.228-1.824h1.452v1.824h2.52v1.38h-2.52v2.088c0 .456.1.78.3.972.2.184.52.276.96.276.224 0 .428-.02.612-.06.192-.04.38-.092.564-.156l.312 1.272c-.264.08-.556.152-.876.216-.312.072-.668.108-1.068.108Zm6.499 0c-.464 0-.9-.068-1.308-.204-.4-.144-.748-.348-1.044-.612-.296-.264-.528-.588-.696-.972-.168-.392-.252-.836-.252-1.332 0-.488.084-.924.252-1.308.176-.392.408-.72.696-.984.288-.272.616-.476.984-.612.376-.144.764-.216 1.164-.216.456 0 .86.072 1.212.216.352.144.644.344.876.6.24.256.42.56.54.912.12.344.18.72.18 1.128 0 .16-.012.316-.036.468-.016.144-.032.252-.048.324h-4.056c.088.432.284.748.588.948.304.2.7.3 1.188.3.272 0 .528-.036.768-.108.248-.072.504-.176.768-.312l.588 1.068c-.344.216-.724.388-1.14.516-.416.12-.824.18-1.224.18Zm-.144-4.896c-.352 0-.648.092-.888.276-.232.184-.392.464-.48.84h2.544c-.088-.744-.48-1.116-1.176-1.116Z"
      />
      <rect width="14" height="14" x="318" y="255" fill="#C1C7C6" rx="2" />
      <path
        stroke="#5C6C75"
        strokeLinecap="round"
        strokeLinejoin="round"
        strokeWidth="1.5"
        d="m323.25 261.417-2.333 2.333m0 0 2.333 2.333m-2.333-2.333h6.416c.619 0 1.213-.246 1.65-.683.438-.438.684-1.031.684-1.65s-.246-1.213-.684-1.65c-.437-.438-1.031-.684-1.65-.684h-.583"
      />
      <rect width="20" height="20" x="346" y="252" fill="#00684A" rx="4" />
      <path
        stroke="#fff"
        strokeLinecap="round"
        strokeLinejoin="round"
        strokeWidth="1.5"
        d="M352.667 258.667h6.666c.354 0 .693.14.943.39s.391.589.391.943v.667l.666.666v2l-.666.667v2c0 .354-.141.693-.391.943s-.589.39-.943.39h-6.666c-.354 0-.693-.14-.943-.39s-.391-.589-.391-.943v-2l-.666-.667v-2l.666-.666V260c0-.354.141-.693.391-.943s.589-.39.943-.39Zm2 6h2.666m-3.333-6-.667-2.667m4.667 2.667.667-2.667"
      />
      <circle cx="353.75" cy="261.75" r=".75" fill="#fff" />
      <circle cx="358.25" cy="261.75" r=".75" fill="#fff" />
      <rect
        width="355"
        height="31"
        x="22.5"
        y="246.5"
        stroke="#0498EC"
        strokeWidth="3"
        rx="5.5"
      />
      <defs>
        <clipPath id="a">
          <path fill="#fff" d="M76 24h248v248H76z" />
        </clipPath>
      </defs>
    </svg>
  );
};

type OptInModalProps = {
  isOptInVisible?: boolean;
  isSignInInProgress?: boolean;
  onOptInModalClose?: () => void;
  onSignInClick?: () => void;
};

const modalContentStyles = css({
  width: 400,
  overflow: 'hidden',
});

const containerStyles = css({
  padding: spacing[4],
});

const titleStyles = css({
  display: 'flex',
  alignItems: 'center',
});

const descriptionStyles = css({});

const controlsStyles = css({
  display: 'flex',
});

const buttonStyles = css({
  flex: 'none',
});

const maybeLaterButtonStyles = css({
  marginLeft: 'auto',
  borderColor: 'transparent !important',
});

const OptInModal: React.FunctionComponent<OptInModalProps> = ({
  isOptInVisible = false,
  isSignInInProgress = false,
  onOptInModalClose,
  onSignInClick,
}) => {
  return (
    <Modal
      open={isOptInVisible}
      setOpen={(open) => {
        if (open === false) {
          onOptInModalClose?.();
        }
      }}
      contentClassName={modalContentStyles}
    >
      <OptInImageBanner></OptInImageBanner>
      <div className={containerStyles}>
        <Subtitle className={titleStyles}>
          Build faster with AI&nbsp;<Badge>Experimental</Badge>
        </Subtitle>
        <div className={descriptionStyles}>
          <p>
            Atlas users can now quickly generate queries and aggregations with
            MongoDBâ€™s AI-powered features, available today in Compass.
          </p>
          <p>
            This feature is an experiment and may give inaccurate responses. You
            can help make it better by leaving feedback.
          </p>
          <p>
            To understand how your data is used with AI partners,{' '}
            <Link href="https://example.com">learn more in the docs</Link>.
          </p>
        </div>
        <div className={controlsStyles}>
          <Button
            variant="primary"
            onClick={onSignInClick}
            className={buttonStyles}
            // TODO: will have to update leafygreen for that
            // isLoading={isSignInInProgress}
          >
            Log in to enable AI
            {isSignInInProgress && (
              <>
                &nbsp;<SpinLoader darkMode></SpinLoader>
              </>
            )}
          </Button>
          <Button
            variant="primaryOutline"
            onClick={onOptInModalClose}
            className={cx(buttonStyles, maybeLaterButtonStyles)}
          >
            Maybe later
          </Button>
        </div>
      </div>
    </Modal>
  );
};

export default connect(
  (state: RootState) => {
    return {
      isOptInVisible: state.aiQuery.isOptInVisible,
      isSignInInProgress: state.atlasSignIn.state === 'in-progress',
    };
  },
  { onOptInModalClose: hideOptIn, onSignInClick: signIn }
)(OptInModal);
