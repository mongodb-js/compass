import { Meta, Story, Controls, Primary } from '@storybook/blocks';
import * as SignalPopoverStories from './signal-popover.stories';

<Meta of={SignalPopoverStories} />

# SignalPopover

The SignalPopover component displays contextual insights and suggestions in a popover format.
It's designed to provide users with helpful information, warnings, or recommendations
about their current context or actions.

## Key features

- Displays single or multiple signals/insights
- Interactive badge that expands on hover/focus
- Support for primary actions and learn more links
- Dark mode support
- Tracking capabilities via SignalHooksProvider
- Customizable badge expansion behavior

## Usage

The SignalPopover component is perfect for:

- Performance suggestions
- Best practice recommendations
- Contextual help and guidance
- Feature discovery
- User onboarding

```tsx
import { SignalPopover, SignalHooksProvider } from './signal-popover';

// Basic usage with tracking
<SignalHooksProvider
  onSignalMount={handleSignalMount}
  onSignalOpen={handleSignalOpen}
  onSignalLinkClick={handleSignalLinkClick}
  onSignalPrimaryActionClick={handleSignalPrimaryActionClick}
  onSignalClose={handleSignalClose}
>
  <SignalPopover signals={signals} />
</SignalHooksProvider>

// Single signal with action
<SignalPopover
  signals={{
    id: 'signal-1',
    title: 'Performance suggestion',
    description: 'This query could be optimized...',
    learnMoreLink: 'https://docs.example.com',
    primaryActionButtonLabel: 'Optimize',
    primaryActionButtonIcon: 'Plus'
  }}
/>

// Multiple signals
<SignalPopover signals={[
  {
    id: 'signal-1',
    title: 'First suggestion',
    description: 'First description...'
  },
  {
    id: 'signal-2',
    title: 'Second suggestion',
    description: 'Second description...'
  }
]} />
```

## Examples

### Basic Usage

<Story of={SignalPopoverStories.Basic} />

Basic example showing both single and multiple signals with tracking enabled.
This demonstrates how to use the SignalHooksProvider to monitor user interactions
with signals, which can be useful for analytics and user behavior tracking.

### Single Signal

<Story of={SignalPopoverStories.SingleSignal} />

Example showing a single signal with a primary action.
This demonstrates how to display a single insight with an actionable button
that users can click to take immediate action.

### Multiple Signals

<Story of={SignalPopoverStories.MultipleSignals} />

Example showing multiple signals that users can navigate between.
This demonstrates how to present multiple insights in a single popover,
allowing users to browse through different suggestions or warnings.

### Expanded Badge

<Story of={SignalPopoverStories.ExpandedBadge} />

Example showing signals with always-expanded badges.
This demonstrates how to make the signal badges permanently visible
rather than only showing them on hover/focus.

### Dark Mode

<Story of={SignalPopoverStories.DarkMode} />

Example showing signals in dark mode.
This demonstrates how the signals adapt to dark theme environments,
maintaining readability and visual hierarchy in low-light conditions.

## Best Practices

1. **Signal Content**:

   - Keep titles clear and concise
   - Provide actionable descriptions
   - Include relevant learn more links
   - Use primary actions when appropriate

2. **User Experience**:

   - Don't overwhelm users with too many signals
   - Make signals dismissible when appropriate
   - Ensure signals are contextually relevant
   - Use tracking to understand signal effectiveness

3. **Accessibility**:
   - Ensure proper contrast ratios
   - Support keyboard navigation
   - Provide clear focus states
   - Include appropriate ARIA attributes

## Props

<Controls />
