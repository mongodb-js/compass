{
    "$schema": "./config.schema.json",
    "buildVariants": [
        {
            "name": "ubuntu",
            "display_name": "Ubuntu 20.04",
            "run_on": "ubuntu2004-large"
        },
        {
            "name": "windows",
            "display_name": "Windows 10",
            "run_on": "windows-vsCurrent-large"
        },
        {
            "name": "rhel",
            "display_name": "RHEL 8.0",
            "run_on": "rhel80-large"
        },
        {
            "name": "macos-11-x64",
            "display_name": "MacOS x64 11",
            "run_on": "macos-1100",
            "run_on_gui": "macos-1100-gui",
            "patchable": false
        },
        {
            "name": "macos-11-arm",
            "display_name": "MacOS arm64 11",
            "run_on": "macos-1100-arm64",
            "run_on_gui": "macos-1100-arm64-gui",
            "patchable": false
        },
        {
            "name": "macos-14-x64",
            "display_name": "MacOS x64 14",
            "run_on": "macos-14-x64",
            "run_on_gui": "macos-14-gui",
            "patchable": false
        },
        {
            "name": "macos-14-arm",
            "display_name": "MacOS arm64 14",
            "run_on": "macos-14-arm64",
            "run_on_gui": "macos-14-arm64-gui"
        }
    ],
    "tasks": {
        "check": {
            "name": "check"
        },
        "test": {
            "name": "test"
        },
        "test-electron": {
            "name": "test-electron",
            "gui": true
        },
        "package": {
            "name": "package",
            "variants": [
                {
                    "name": "compass",
                    "vars": {
                        "compass_distribution": "compass"
                    },
                    "//": "We are explicitly packaging on the EOL version of Ubuntu so that Compass (or rather compiled native dependencies) works on Ubuntu versions starting from this versions",
                    "run_on_override": {
                        "ubuntu2004-large": "ubuntu1604-large"
                    }
                },
                {
                    "name": "compass-readonly",
                    "vars": {
                        "compass_distribution": "compass-readonly"
                    },
                    "run_on_override": {
                        "ubuntu2004-large": "ubuntu1604-large"
                    }
                },
                {
                    "name": "compass-isolated",
                    "vars": {
                        "compass_distribution": "compass-isolated"
                    },
                    "run_on_override": {
                        "ubuntu2004-large": "ubuntu1604-large"
                    }
                }
            ]
        },
        "test-packaged-app": {
            "name": "test-packaged-app",
            "gui": true,
            "depends_on": "package-compass",
            "variants": [
                {
                    "name": "40x-community",
                    "vars": {
                        "mongodb_version": "4.0.x"
                    },
                    "skip_on": [
                        "macos-11-x64",
                        "macos-14-x64",
                        "macos-11-arm",
                        "macos-14-arm"
                    ]
                },
                {
                    "name": "40x-enterprise",
                    "vars": {
                        "mongodb_version": "4.0.x-enterprise"
                    },
                    "skip_on": [
                        "macos-11-x64",
                        "macos-14-x64",
                        "macos-11-arm",
                        "macos-14-arm"
                    ],
                    "//": "MongoDB 4.0 / 4.2 Enterprise doesn't work on Ubuntu 20.04 without additional dependencies installed, it's easier to use an older machine than install missing dependencies as machines we are using are stateful",
                    "run_on_override": {
                        "ubuntu2004-large": "ubuntu1804-large"
                    }
                },
                {
                    "name": "42x-community",
                    "vars": {
                        "mongodb_version": "4.2.x"
                    },
                    "skip_on": [
                        "macos-11-x64",
                        "macos-14-x64",
                        "macos-11-arm",
                        "macos-14-arm"
                    ]
                },
                {
                    "name": "42x-enterprise",
                    "vars": {
                        "mongodb_version": "4.2.x-enterprise"
                    },
                    "skip_on": [
                        "macos-11-x64",
                        "macos-14-x64",
                        "macos-11-arm",
                        "macos-14-arm"
                    ],
                    "run_on_override": {
                        "ubuntu2004-large": "ubuntu1804-large"
                    }
                },
                {
                    "name": "44x-community",
                    "vars": {
                        "mongodb_version": "4.4.x"
                    },
                    "skip_on": [
                        "macos-11-x64",
                        "macos-14-x64",
                        "macos-11-arm",
                        "macos-14-arm"
                    ]
                },
                {
                    "name": "44x-enterprise",
                    "vars": {
                        "mongodb_version": "4.4.x-enterprise"
                    },
                    "skip_on": [
                        "macos-11-x64",
                        "macos-14-x64",
                        "macos-11-arm",
                        "macos-14-arm"
                    ]
                },
                {
                    "name": "5x-community",
                    "vars": {
                        "mongodb_version": "5.x.x"
                    },
                    "skip_on": [
                        "macos-11-x64",
                        "macos-14-x64",
                        "macos-11-arm",
                        "macos-14-arm"
                    ]
                },
                {
                    "name": "5x-enterprise",
                    "vars": {
                        "mongodb_version": "5.x.x-enterprise"
                    },
                    "skip_on": [
                        "macos-11-x64",
                        "macos-14-x64",
                        "macos-11-arm",
                        "macos-14-arm"
                    ]
                },
                {
                    "name": "60x-community",
                    "vars": {
                        "mongodb_version": "6.0.x"
                    }
                },
                {
                    "name": "60x-enterprise",
                    "vars": {
                        "mongodb_version": "6.0.x-enterprise"
                    }
                },
                {
                    "name": "70x-community",
                    "vars": {
                        "mongodb_version": "7.0.x"
                    }
                },
                {
                    "name": "70x-enterprise",
                    "vars": {
                        "mongodb_version": "7.0.x-enterprise"
                    }
                },
                {
                    "name": "80x-community",
                    "vars": {
                        "mongodb_version": ">= 8.0.0-rc4"
                    }
                },
                {
                    "name": "80x-enterprise",
                    "vars": {
                        "mongodb_version": ">= 8.0.0-rc4-enterprise"
                    }
                },
                {
                    "name": "latest",
                    "vars": {
                        "mongodb_version": "latest-alpha-enterprise"
                    },
                    "skip_on": [
                        "macos-11-x64",
                        "macos-14-x64",
                        "macos-11-arm",
                        "macos-14-arm",
                        "rhel"
                    ]
                }
            ]
        },
        "test-web-sandbox": {
            "name": "test-web-sandbox",
            "gui": true,
            "variants": [
                {
                    "name": "chrome",
                    "vars": {
                        "mongodb_version": "latest-alpha-enterprise",
                        "browser_name": "chrome"
                    },
                    "only_on": [
                        "ubuntu"
                    ]
                },
                {
                    "name": "firefox",
                    "vars": {
                        "mongodb_version": "latest-alpha-enterprise",
                        "browser_name": "firefox"
                    },
                    "only_on": [
                        "ubuntu"
                    ]
                }
            ]
        }
    }
}