buildvariants:
  - name: macos_gui
    display_name: MacOS (Test w/ GUI Session)
    # TODO: Change this to our pool of machines when https://jira.mongodb.org/browse/BUILD-14120 is done
    run_on: macos-1014-codesign
    tasks:
      - name: test-electron
      # TODO: These tests are not currently running due to keychain access
      #       missing. We disable this step to not block codesign machine time
      #       with bootstrap / teardown that does nothing. We should be able to
      #       enable these tests after https://jira.mongodb.org/browse/BUILD-14458
      # - name: test-packaged-app-macos

  - name: macos
    display_name: MacOS (Test and Package)
    # TODO: Change this to our pool of machines when https://jira.mongodb.org/browse/BUILD-14120 is done
    run_on: macos-1014
    tasks:
      - name: test
      - name: check
      - name: package
      - name: package-readonly
      - name: package-isolated

  - name: coverage
    display_name: E2E Coverage
    run_on: ubuntu2004-large
    tasks:
      - name: e2e-coverage

  - name: ubuntu_publish
    display_name: Publish Artifacts
    run_on: ubuntu2004-large
    tasks:
      - name: publish

  - name: ubuntu_connectivity_tests
    display_name: Connectivity Tests
    run_on: ubuntu2004-large
    tasks:
      - name: test-connectivity

  - name: ubuntu_csfle_tests
    display_name: CSFLE Tests
    run_on: ubuntu2004-large
    tasks:
      - name: test-csfle

  - name: windows_package
    display_name: windows (Test and Package)
    run_on: windows-vsCurrent-large
    tasks:
      - name: test
      - name: test-electron
      - name: check
      - name: package
      - name: package-readonly
      - name: package-isolated

  - name: ubuntu_package
    display_name: ubuntu (Test and Package)
    run_on: ubuntu1604-large
    tasks:
      - name: test
      - name: test-electron
      - name: check
      - name: package
      - name: package-readonly
      - name: package-isolated

  - name: rhel_package
    display_name: rhel (Test and Package)
    run_on: rhel76-large
    tasks:
      - name: test
      - name: test-electron
      - name: check
      - name: package
      - name: package-readonly
      - name: package-isolated

  - name: windows_e2e
    display_name: windows (E2E)
    run_on: windows-vsCurrent-large
    tasks:
      - name: windows_e2e_test-packaged-app-40x-community
      - name: windows_e2e_test-packaged-app-40x-enterprise
      - name: windows_e2e_test-packaged-app-42x-community
      - name: windows_e2e_test-packaged-app-42x-enterprise
      - name: windows_e2e_test-packaged-app-44x-community
      - name: windows_e2e_test-packaged-app-44x-enterprise
      - name: windows_e2e_test-packaged-app-5x-community
      - name: windows_e2e_test-packaged-app-5x-enterprise

  - name: ubuntu_e2e
    display_name: ubuntu (E2E)
    run_on: ubuntu2004-large
    tasks:
      - name: ubuntu_e2e_test-packaged-app-40x-community
      - name: ubuntu_e2e_test-packaged-app-42x-community
      - name: ubuntu_e2e_test-packaged-app-44x-community
      - name: ubuntu_e2e_test-packaged-app-44x-enterprise
      - name: ubuntu_e2e_test-packaged-app-5x-community
      - name: ubuntu_e2e_test-packaged-app-5x-enterprise

  - name: rhel_e2e
    display_name: rhel (E2E)
    run_on: rhel76-large
    tasks:
      - name: rhel_e2e_test-packaged-app-40x-community
      - name: rhel_e2e_test-packaged-app-40x-enterprise
      - name: rhel_e2e_test-packaged-app-42x-community
      - name: rhel_e2e_test-packaged-app-42x-enterprise
      - name: rhel_e2e_test-packaged-app-44x-community
      - name: rhel_e2e_test-packaged-app-44x-enterprise
      - name: rhel_e2e_test-packaged-app-5x-community
      - name: rhel_e2e_test-packaged-app-5x-enterprise
